; Generated by c68 v4.4.5, 25 Jan 95 (Jan 25 1995) from "isr.c"
	data
	even
_IKBD_control:
	dc.l	16776192
_IKBD_status:
	dc.l	16776192
_IKBD_RDR:
	dc.l	16776194
	text
	even
_read_scancode:
	link	a6,#0
L1:
L2:
	;line	9
	move.l	_IKBD_status,a0
	move.b	(a0),d0
	and.b	#1,d0
	beq	L1
L3:
	;line	11
	move.l	_IKBD_RDR,a0
	move.b	(a0),d0
L4:
	unlk	a6
	rts
_install_vector:
	link	a6,#-8
	move.l	a3,-(a7)
	;line	17
	move.w	8(a6),d0
	ext.l	d0
	asl.l	#2,d0
	move.l	d0,a3
	;line	17
	move.l	(a3),-4(a6)
	;line	18
	move.l	10(a6),(a3)
	;line	19
	move.l	-4(a6),d0
L5:
	move.l	(a7)+,a3
	unlk	a6
	rts
_do_IKBD_ISR:
	link	a6,#-10
	move.l	d3,-(a7)
	;line	28
	pea	-1
	pea	-1
	pea	-1
	move.w	#16,-(a7)
	jsr	__trap_14_wlll
	lea	14(a7),a7
	move.l	d0,a0
	move.l	(a0),-6(a6)
	pea	_ikbd_isr
	move.w	#70,-(a7)
	jsr	_install_vector
	addq.l	#6,a7
	move.l	d0,-10(a6)
	;line	28
	move.l	_IKBD_control,a0
	move.b	#22,(a0)
	;line	30
	jsr	_read_scancode
	move.b	d0,d3
	;line	31
	bra	L7
L6:
	;line	32
	move.b	#128,d0
	and.b	d3,d0
	bne	L9
	;line	33
	move.l	-6(a6),a0
	clr.l	d0
	move.b	d3,d0
	add.l	d0,a0
	move.b	(a0),-2(a6)
	;line	34
	clr.w	d0
	move.b	-2(a6),d0
	move.w	d0,-(a7)
	move.w	#2,-(a7)
	jsr	__trap_1_ww
	addq.l	#4,a7
L9:
	;line	36
	jsr	_read_scancode
	move.b	d0,d3
L7:
	cmp.b	#1,d3
	bne	L6
L8:
	;line	39
	move.l	-10(a6),-(a7)
	move.w	#70,-(a7)
	jsr	_install_vector
	;line	40
	move.l	_IKBD_control,a0
	move.b	#150,(a0)
	move.l	-14(a6),d3
	unlk	a6
	rts
	globl	_read_scancode
	globl	_install_vector
	globl	_do_IKBD_ISR
	globl	_IKBD_control
	globl	_IKBD_status
	globl	_IKBD_RDR
